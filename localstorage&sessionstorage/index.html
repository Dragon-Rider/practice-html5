<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>localStorage and sessionStorage</title>
</head>
<body>
    <input type="text" placeholder="test" />

    <script type="text/javascript">
        //http://www.cnblogs.com/yuzhongwusan/archive/2011/12/19/2293347.html
        //http://blog.csdn.net/nx8823520/article/details/30478859
        var input = document.querySelectorAll('input')[0];
        
        input.onblur = function(){
            localStorage.input = input.value;
        }

        window.addEventListener("storage", changeData, false);  //后面的false不能少

        function changeData(e) {
            if (!e) {
                e = window.event;
            }
            console.log(e);

            //同步两个页面
            input.value = e.newValue;
        }


        //localStorage
        // localStorage.setItem("key1", "val1");
        // localStorage.key2 = "val2";
        // localStorage["key3"] = "val3";
        // localStorage.key4 = "getItem";
        // localStorage.key5 = "definition";

        // console.log(localStorage.getItem('key4'));
        // console.log(localStorage.key5);
        // console.log('\n');

        // localStorage.removeItem('key5');

        // for (var i = 0; i < localStorage.length; i++) {
        //     var key = localStorage.key(i),
        //         val = localStorage[key];
        //     console.log(key + ":" + val);
        // }

        //localStorage.clear();

        // sessionStorage
        // sessionStorage.setItem("key1", "val1");
        // sessionStorage.key2 = "val2";
        // sessionStorage["key3"] = "val3";

        // for (var i = 0; i < sessionStorage.length; i++) {
        //     var key = sessionStorage.key(i),
        //         val = sessionStorage[key];
        //     console.log(key + ":" + val);
        // }

      


    </script>
</body>
</html>